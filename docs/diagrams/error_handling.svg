<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="570px" preserveAspectRatio="none" style="width:1438px;height:570px;background:#FFFFFF;" version="1.1" viewBox="0 0 1438 570" width="1438px" zoomAndPan="magnify"><title>Error Handling Flow: Saving Data Failure</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="323.1416" x="558.6821" y="27.9951">Error Handling Flow: Saving Data Failure</text><g><title>UI Controller</title><rect fill="#FFFFFF" height="71.2656" style="stroke:#181818;stroke-width:1;" width="10" x="141.9775" y="290.8203"/></g><g><title>LibraryService (Service)</title><rect fill="#FFFFFF" height="169.7969" style="stroke:#181818;stroke-width:1;" width="10" x="458.1519" y="121.0234"/></g><g><title>GeneralStorage (Storage)</title><rect fill="#FFFFFF" height="111.5313" style="stroke:#181818;stroke-width:1;" width="10" x="907.3584" y="150.1563"/></g><rect fill="transparent" height="307.1328" style="stroke:#000000;stroke-width:1.5;" width="1421.5059" x="10" y="194.2891"/><g><title>UI Controller</title><rect fill="transparent" height="428.5313" width="8" x="142.9775" y="89.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="146" x2="146" y1="89.8906" y2="518.4219"/></g><g><title>LibraryService (Service)</title><rect fill="transparent" height="428.5313" width="8" x="459.1519" y="89.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="462.2476" x2="462.2476" y1="89.8906" y2="518.4219"/></g><g><title>GeneralStorage (Storage)</title><rect fill="transparent" height="428.5313" width="8" x="908.3584" y="89.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="912.3086" x2="912.3086" y1="89.8906" y2="518.4219"/></g><g><title>Operating System/File System</title><rect fill="transparent" height="428.5313" width="8" x="1248.3618" y="89.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1252.1279" x2="1252.1279" y1="89.8906" y2="518.4219"/></g><g><title>User</title><rect fill="transparent" height="428.5313" width="8" x="1394.5508" y="89.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1397.5957" x2="1397.5957" y1="89.8906" y2="518.4219"/></g><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="253.9551" x="20" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.999" x="102.978" y="62.292">UI Controller</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="239.9551" x="27" y="78.5889">(e.g., on shutdown or save action)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="253.9551" x="20" y="517.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.999" x="102.978" y="537.417">UI Controller</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="239.9551" x="27" y="553.7139">(e.g., on shutdown or save action)</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="181.8086" x="372.2476" y="58.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.8086" x="379.2476" y="78.5889">LibraryService (Service)</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="181.8086" x="372.2476" y="517.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167.8086" x="379.2476" y="537.417">LibraryService (Service)</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="194.0996" x="815.3086" y="58.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180.0996" x="822.3086" y="78.5889">GeneralStorage (Storage)</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="194.0996" x="815.3086" y="517.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180.0996" x="822.3086" y="537.417">GeneralStorage (Storage)</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="226.4678" x="1139.1279" y="58.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="212.4678" x="1146.1279" y="78.5889">Operating System/File System</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="226.4678" x="1139.1279" y="517.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="212.4678" x="1146.1279" y="537.417">Operating System/File System</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="45.9102" x="1375.5957" y="58.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="1382.5957" y="78.5889">User</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="45.9102" x="1375.5957" y="517.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="1382.5957" y="537.417">User</text><g><title>UI Controller</title><rect fill="#FFFFFF" height="71.2656" style="stroke:#181818;stroke-width:1;" width="10" x="141.9775" y="290.8203"/></g><g><title>LibraryService (Service)</title><rect fill="#FFFFFF" height="169.7969" style="stroke:#181818;stroke-width:1;" width="10" x="458.1519" y="121.0234"/></g><g><title>GeneralStorage (Storage)</title><rect fill="#FFFFFF" height="111.5313" style="stroke:#181818;stroke-width:1;" width="10" x="907.3584" y="150.1563"/></g><polygon fill="#181818" points="446.1519,117.0234,456.1519,121.0234,446.1519,125.0234,450.1519,121.0234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="146.9775" x2="452.1519" y1="121.0234" y2="121.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71.6143" x="153.9775" y="115.9575">saveData()</text><polygon fill="#181818" points="895.3584,146.1563,905.3584,150.1563,895.3584,154.1563,899.3584,150.1563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="468.1519" x2="901.3584" y1="150.1563" y2="150.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108.0498" x="475.1519" y="145.0903">saveBookList(...)</text><polygon fill="#181818" points="1240.3618,175.2891,1250.3618,179.2891,1240.3618,183.2891,1244.3618,179.2891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="917.3584" x2="1246.3618" y1="179.2891" y2="179.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="311.0034" x="924.3584" y="174.2231">Attempt to write to file (e.g., bookDatabase.txt)</text><path d="M10,194.2891 L74.4429,194.2891 L74.4429,201.4219 L64.4429,211.4219 L10,211.4219 L10,194.2891 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="transparent" height="307.1328" style="stroke:#000000;stroke-width:1.5;" width="1421.5059" x="10" y="194.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="25" y="207.356">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="306.3672" x="89.4429" y="206.4995">[Write Fails (e.g., Permissions Denied, Disk Full)]</text><polygon fill="#181818" points="928.3584,228.5547,918.3584,232.5547,928.3584,236.5547,924.3584,232.5547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="922.3584" x2="1251.3618" y1="232.5547" y2="232.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78.2729" x="934.3584" y="227.4888">IOException</text><polygon fill="#181818" points="479.1519,257.6875,469.1519,261.6875,479.1519,265.6875,475.1519,261.6875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="473.1519" x2="911.3584" y1="261.6875" y2="261.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="415.2065" x="485.1519" y="256.6216">Propagate IOException (or handle and throw custom exception)</text><polygon fill="#181818" points="162.9775,286.8203,152.9775,290.8203,162.9775,294.8203,158.9775,290.8203" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="156.9775" x2="462.1519" y1="290.8203" y2="290.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="287.1743" x="168.9775" y="285.7544">Propagate Exception (or return error status)</text><line style="stroke:#181818;stroke-width:1;" x1="151.9775" x2="193.9775" y1="319.9531" y2="319.9531"/><line style="stroke:#181818;stroke-width:1;" x1="193.9775" x2="193.9775" y1="319.9531" y2="332.9531"/><line style="stroke:#181818;stroke-width:1;" x1="152.9775" x2="193.9775" y1="332.9531" y2="332.9531"/><polygon fill="#181818" points="162.9775,328.9531,152.9775,332.9531,162.9775,336.9531,158.9775,332.9531" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105.8662" x="158.9775" y="314.8872">Catch Exception</text><polygon fill="#181818" points="1386.5508,358.0859,1396.5508,362.0859,1386.5508,366.0859,1390.5508,362.0859" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="146.9775" x2="1392.5508" y1="362.0859" y2="362.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="456.2568" x="153.9775" y="357.02">Display Error Message (e.g., "Failed to save data: Permission denied")</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="10" x2="1431.5059" y1="371.0859" y2="371.0859"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="106.0684" x="15" y="381.2964">[Write Succeeds]</text><polygon fill="#181818" points="923.3584,402.0234,913.3584,406.0234,923.3584,410.0234,919.3584,406.0234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="917.3584" x2="1251.3618" y1="406.0234" y2="406.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52.3301" x="929.3584" y="400.9575">Success</text><polygon fill="#181818" points="474.1519,431.1563,464.1519,435.1563,474.1519,439.1563,470.1519,435.1563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="468.1519" x2="911.3584" y1="435.1563" y2="435.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202.23" x="480.1519" y="430.0903">Return (void or success status)</text><polygon fill="#181818" points="157.9775,460.2891,147.9775,464.2891,157.9775,468.2891,153.9775,464.2891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="151.9775" x2="462.1519" y1="464.2891" y2="464.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202.23" x="163.9775" y="459.2231">Return (void or success status)</text><polygon fill="#181818" points="1386.5508,489.4219,1396.5508,493.4219,1386.5508,497.4219,1390.5508,493.4219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="146.9775" x2="1392.5508" y1="493.4219" y2="493.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="326.2632" x="153.9775" y="488.356">(Optional) Display Success Message or do nothing</text><!--SRC=[bLF1Rjim3BtxAuYS7A3rxZaCs9fc2z31nOnYbrqOYqk4Af8XqKxpzwDaEOYHjS1yakJtoCVt9DPi21wzTnw-erL6spriZ3kjeC4XRjR821lKflTK51rwrgtkq38iNhRmu2nxPmpvtxQaQb_TWRCG3ZqhTx8WLGCE1DYoTdQv00pmifrNUT8xZ_xSa1zqIr3cnGZEcpdZ6rdoQ1fs7lUHCIuoOzpC6NKd18xZDEV0TFoqqJBsk4wikYaA6UV-yzGHLabvdBvS5b7_W4mNFHCg4hACaV3LkTSd7RYigkgQbrLDOE7LZL2-i2Ze6DZ1oMi1ok9Fr9RDt4cvg667WIf-usLHe67ubR0nbJ0XdyaVTGXYSu0rMKtg3jOwlCAcDsPPW7pIyNucU5i_lhNKnMmIuA9kviEpTntkunHNU2WbsqEyCPAkLS07xqxGze7T4MX2ZNqLtVYGkaqUIZVn_hhHl8qdxhq5IhSqC78VRWldOEBnvL2kMjoFmQOM3yZj0UPJvz-1l034iixWEJ-97nH2kcAZnuleEAaOKhhMIf9PNJalWgBnYnjr8eHCe9nRqxSjaGh_3YNz3U63G7wEVfI3qoeziP7nhZKVUVw_jQvidlbMribGDCkBXNcGYubINJcmZW_o40kowYy0]--></g></svg>